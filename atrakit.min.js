/** @preserve ATRAKIT: VIEW DOC|CODE|LIC @ github.com/chadkluck/atrakit */
"undefined"==typeof atrakit&&(atrakit=!1),function(t){var e="0.1.2-20161209-01",a="github.com/chadkluck/atrakit",n="ATRAKIT",i="Analytics TRAcking toolKIT",r=!1,o=!1,c="txt|pdf|pptx?|xlsx?|docx?|mp(3|4|eg)|mov|avi|wmv|wav|zip|jar|gif|jpe?g|png|exe|css|js",d={a:"click",button:"click",form:"submit",select:"change",input:"change"},f={TRAD:{desc:"Using Traditional Google Analytics (ga.js)",eventfn:function(t,e,a){pageTracker._trackEvent(t,e,a)},pagefn:function(t){pageTracker._trackPageview(t)},detectfn:function(){return"undefined"!=typeof gaJsHost}},CLAS:{desc:"Using Async Classic Google Analytics (ga.js async)",eventfn:function(t,e,a){_gaq.push(["_trackEvent",t,e,a])},pagefn:function(t){_gaq.push(["_trackPageview",t])},detectfn:function(){return"undefined"!=typeof _gaq}},UNIV:{desc:"Using Universal Analytics (analytics.js)",eventfn:function(t,e,a){ga("send","event",t,e,a)},pagefn:function(t){ga("send","pageview",t)},detectfn:function(){return"undefined"!=typeof ga}},GTMX:{desc:"Using Google Tag Manager",eventfn:function(t,e,a){},pagefn:function(t){},detectfn:function(){return"undefined"!=typeof dataLayer}},NONE:{desc:"No Analytics Detected",eventfn:function(t,e,a){},pagefn:function(t){},detectfn:function(){return!1}}},l=null,s=0,u=["Track Only","Tag and Track","Tag Only"],p=function(t){if(!r){var e=new Date,a=e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+"."+e.getMilliseconds();console.log(n+" ["+a+"] : "+t)}},g=function(t){t?(p("Silenced"),r=!0):(r=!1,p("Unsilenced"))},y=function(){return atrakit},v=function(t){return atrakit=t===!0,y()},k=function(t){t?(p("Event types will be sent with Action Attributes"),o=!0):(p("Event types will NOT be sent with Action Attributes"),o=!1)},h=function(t){f.addElem(t),l=null,C()},b=function(e){var a=o?a=" ("+e.type+")":"",n=t(this);n.atrakitAdd("data"),T(n.attr("data-category"),n.attr("data-action")+a,n.attr("data-label"))},m=function(e,a){var n=new Date;if(t(document).atrakitGet("gaFlavor"),"undefined"==typeof e.prop("tagName")&&(e=t(document.getElementsByTagName("BODY")[0])),p("Init on for "+e.prop("tagName")+": "+u[a+1]),a>=0){var i="",r="[data-category][data-action][data-label], [data-atrakit='false']";i="form, select:required, input:required, a[href=''], a[href^='javascript:'], a[href^='mailto:'], a[href^='tel:'], a.button, button, [data-atrakit='true'], [data-atrakit-event]",e.find(i).not(r).atrakitAdd("data"),i="a[href*='#'], a[href*='.']",e.find(i).not(".button, "+r).atrakitLinkFilter().atrakitAdd("data")}if(a<=0){var o="";Object.keys(d).forEach(function(t){e.on(d[t],t+"[data-category]:not([data-atrakit-event])",b),o=o+t+", "},d),e.find("[data-category][data-atrakit-event]").each(function(){t(this).on(t(this).attr("data-atrakit-event"),b)}),e.on("click","[data-category]:not("+o+"[data-atrakit-event])",b)}var c=Math.abs(new Date-n);p("Init of "+s+" elements completed in "+c+" milliseconds")},w=function(e,a){"undefined"==typeof a&&(a={});var n=function(t,e){switch(t){case"category":0===i&&(i=e);break;case"action":0===r&&(r=e);break;case"label":0===o&&(o=e)}},i=0,r=0,o=0,c=!1;if(a!=={}&&(i="undefined"!=typeof a.category?a.category:0,r="undefined"!=typeof a.action?a.action:0,o="undefined"!=typeof a.label?a.label:0,c=!0),0===i&&(i="undefined"!=typeof t(e).attr("data-category")?t(e).attr("data-category"):0),0===r&&(r="undefined"!=typeof t(e).attr("data-action")?t(e).attr("data-action"):0),0===o&&(o="undefined"!=typeof t(e).attr("data-label")?t(e).attr("data-label"):0),s++,!i||!r||!o){var d=function(e){var a="";if("undefined"!=typeof t(e).closest("[id]").attr("id")){var n=t(e).closest("[id]");a=n.prop("tagName")+"#"+n.attr("id")+" "}return a},f=function(e){return"undefined"!=typeof t(e).attr("id")?"#"+t(e).attr("id"):" "},l=t(e).prop("tagName").toUpperCase();if("A"===l)if(t(e).attr("href")){var u=A(t(e));if(u.isDownload)n("category","Download"),n("action","Download ("+u.type+")"),n("label",u.name+" ("+u.path+")");else{var p=t(e).attr("href");/^mailto:/i.test(p)?(n("category","Contact"),n("action","Email"),n("label",p)):/^tel:/i.test(p)?(n("category","Contact"),n("action","Telephone"),n("label",p)):/^javascript:/i.test(p)?(n("category","Script"),n("action","Link"),n("label","javascript: in HREF")):(n("label",t(e).attr("href")),n("action","Link"))}}else{var g="undefined"!=typeof t(e).attr("id")?"#"+t(e).attr("id")+" ":"",y=t(e).text()?t(e).text():"Empty Text";n("label","A"+g+" "+y+" (No HREF)")}else if("INPUT"===l||"SELECT"===l)n("label",d(e)+l+f(e)+"[name='"+t(e).attr("name")+"']");else if("FORM"===l){n("action","Form Submitted");var v="undefined"!=typeof t(e).attr("id")?"#"+t(e).attr("id"):"";t(e).attr("action")?n("label","FORM"+v+" submitted to "+t(e).attr("action")):n("label","FORM"+v+" submitted from "+window.location.href)}else t(e).attr("id")?n("label",l+"#"+t(e).attr("id")):t(e).closest("[id]")?n("label",t(e).closest("[id]").prop("tagName")+"#"+t(e).closest("[id]").attr("id")+" "+l):t(e).attr("title")?n("label",l+" "+t(e).attr("title")):t(e).closest("[title]")?n("label",t(e).closest("[id]").prop("tagName")+" "+t(e).closest("[title]").attr("title")+" "+l):n("label",l+" at "+window.location.href);n("action","Event Trigger"),n("category",l),c=!0}c&&t(e).attr({"data-label":o,"data-action":r,"data-category":i})},E=function(e){if(t(e).attr("data-category")&&t(e).attr("data-action")&&t(e).attr("data-label")){var a="click";if(t(e).attr("data-atrakit-event"))a=t(e).attr("data-atrakit-event"),t(e).on(a,b);else{var n=t(e).prop("tagName"),i={};try{Object.keys(d).forEach(function(t){if(n===t)throw a=d[t],i},d)}catch(t){if(t!==i)throw t}}t(e).on(a,b)}else p("No data tags so no event added")},A=function(e){var a={isDownload:!1};if("A"===t(e).prop("tagName").toUpperCase()){var n=t(e)[0].pathname,i=new RegExp("("+c+")$","gi");if(i.test(n)){var r=n.substring(n.lastIndexOf("/")+1),o=r.substring(r.lastIndexOf(".")+1).toUpperCase(),d=t(e)[0].hostname+n;a={isDownload:!0,name:r,type:o,path:d}}}return a},T=function(t,e,a){N().eventfn(t,e,a),p("Event Triggered (category: '"+t+"', action: '"+e+"', label: '"+a+"') Sent To: "+N().name)},N=function(){if("undefined"==typeof l||null===l){l=f.NONE,l.name="NONE";var t={};try{Object.keys(f).forEach(function(e){if(this[e].detectfn())throw l=f[e],l.name=e,t},f)}catch(e){if(e!==t)throw e}p(l.desc)}return l},O=function(t){return t===N().name},C=function(){return"NONE"!==N().name};t.fn.atrakitAdd=function(t,e){return"undefined"==typeof t&&(t="both"),"undefined"==typeof e&&(e={}),this.each(function(){switch(t.toLowerCase()){case"data":w(this,e);break;case"event":E(this);break;case"both":w(this,e),E(this);break;default:p("Unknown Command for atrakitAdd(): "+t)}})},t.fn.atrakit=function(e,a){switch("undefined"==typeof e&&(e="init"),"undefined"==typeof a&&(a={}),e.toLowerCase()){case"init":var n=0;"undefined"!=typeof a.tagOnly&&(n=a.tagOnly?1:n),"undefined"!=typeof a.trackOnly&&(n=a.trackOnly?-1:n),m(t(this),n);break;case"config":"undefined"!=typeof a.silence&&g(a.silence),"undefined"!=typeof a.listEventType&&k(a.listEventType),"undefined"!=typeof a.customAnalytic&&h(a.customAnalytic);break;default:p("Unknown Command for atrakit(): "+e)}return this},t.fn.atrakitGet=function(t,e){"undefined"==typeof t&&(t="gaFlavor"),"undefined"==typeof e&&(e="");var a="";switch(t.toLowerCase()){case"gaflavor":a=N();break;case"is":""!==e?a=O(e.toUpperCase()):p("Empty arg for atrakitGet('is', arg)");break;default:p("Unknown Command for atrakitGet(): "+t)}return a},t.fn.atrakitLinkFilter=function(){var e=window.location.hostname.replace(/\./g,"\\."),a="(https?\\:)?\\/\\/(?!"+e+")",n="(("+e+"){0,1}.*#)|^\\s*$",i="\\.(?:"+c+")(?=\\?([^#]*))?(?:#(.*))?",r="("+a+")|("+i+")|("+n+")";return this.filter(function(){var e=new RegExp(r,"gi");return e.test(t(this).attr("href"))})},v(!0),p("Loaded "+i+" ("+a+") [ver"+e+"]"),C()}(jQuery);